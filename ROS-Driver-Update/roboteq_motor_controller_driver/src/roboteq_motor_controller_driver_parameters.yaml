roboteq:
  serial:
    port: {
      type: string,
    }
    baud: {
      type: int,
    }  

  mechanical:
    reduction_ratio: {
      type: double,
      default_value: 70.0,
    }
    wheel_circumference: {
      type: double,
      default_value: 1.1623895,
    }
    track_width: {
      type: double,
      default_value: 0.9925,
    }
  
  motor:
    channel_mode: {
      type: string,
      description: "Single: Driver controls two motors seperately | Dual: Driver controls two motors with a single value | Dual_differential: Driver controls two motors moving a differential steering vehicle.",
      validation: {
        one_of<>: [ [ "dual_differential", "dual", "single" ] ],
      }
    }
    motor_1_type: {
      type: string,
      validation: {
        one_of<>: [ [ "set_speed", "go_to_speed" ] ],
      }
    }
    motor_2_type: {
      type: string,
      validation: {
        one_of<>: [ [ "set_speed", "go_to_speed" ] ],
      }
    }
    max_rpm: {
      type: int,
      default_value: 3500,
      validation: {
        gt<>: [0],
      }
    }

  differential:
    safe_speed: {
      type: bool,
      default_value: false,
    }
    max_vel_x: {
      type: double,
      default_value: 0.5,
      validation: {
        gt<>: [0.0],
      }
    }
    max_vel_ang: {
      type: double,
      default_value: 0.5,
      validation: {
        gt<>: [0.0],
      }
    }

  queries_list: {
    type: string_array,
    validation: {
      size_lt<>: [4],
      unique<>: [],
    }
  }

  # Arguments in queries should be unique, there is no check for duplicates between queries
  queries:
    __map_queries_list:
      frequency: {
        type: int,
        validation: {
          gt<>: [0],
        }
      }        
      arguments: {
        type: string_array,
        validation: {
          unique<>: [],
        }
      }
      commands: {
        type: string_array,
        validation: {
          unique<>: [],
        }
      }
    relative_arguments: {
      type: string_array,
      default_value: ["?CR", "?BCR"],
      description: "Arguments, such as relative encoder counts, whose values should not be lost/skipped.",
      validation: {
        unique<>: [],
      }
    }
    ns: {
      type: string,
      default_value: "roboteq",
      description: "Namespace for publishers"
    }   